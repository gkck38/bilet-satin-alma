# ğŸ« Bilet SatÄ±n Alma Platformu

<div align="center">

![PHP](https://img.shields.io/badge/PHP-8.2-777BB4?style=for-the-badge&logo=php&logoColor=white)
![SQLite](https://img.shields.io/badge/SQLite-3-003B57?style=for-the-badge&logo=sqlite&logoColor=white)
![Bootstrap](https://img.shields.io/badge/Bootstrap-5.3-7952B3?style=for-the-badge&logo=bootstrap&logoColor=white)
![Docker](https://img.shields.io/badge/Docker-Enabled-2496ED?style=for-the-badge&logo=docker&logoColor=white)
![License](https://img.shields.io/badge/License-MIT-green?style=for-the-badge)

**Modern, gÃ¼venli ve kullanÄ±cÄ± dostu otobÃ¼s bileti satÄ±n alma platformu**

[Ã–zellikler](#-Ã¶zellikler) â€¢
[Kurulum](#-kurulum) â€¢
[KullanÄ±m](#-kullanÄ±m) â€¢
[Demo Hesaplar](#-demo-hesaplar) â€¢
[DokÃ¼mantasyon](#-dokÃ¼mantasyon)

</div>

---

## ğŸ“‹ Ä°Ã§indekiler

- [Ã–zellikler](#-Ã¶zellikler)
- [Teknolojiler](#-teknolojiler)
- [Sistem Gereksinimleri](#-sistem-gereksinimleri)
- [Kurulum](#-kurulum)
  - [Docker ile Kurulum (Ã–nerilen)](#docker-ile-kurulum-Ã¶nerilen)
  - [Manuel Kurulum](#manuel-kurulum)
- [KullanÄ±m](#-kullanÄ±m)
- [Demo Hesaplar](#-demo-hesaplar)
- [Proje YapÄ±sÄ±](#-proje-yapÄ±sÄ±)
- [VeritabanÄ± ÅemasÄ±](#-veritabanÄ±-ÅŸemasÄ±)
- [GÃ¼venlik](#-gÃ¼venlik)
- [API DokÃ¼mantasyonu](#-api-dokÃ¼mantasyonu)
- [KatkÄ±da Bulunma](#-katkÄ±da-bulunma)
- [Lisans](#-lisans)

---

## âœ¨ Ã–zellikler

### ğŸ‘¥ 4 FarklÄ± KullanÄ±cÄ± RolÃ¼

<table>
<tr>
<td width="25%">

#### ğŸŒ ZiyaretÃ§i
- Sefer arama
- Sefer listeleme
- DetaylarÄ± gÃ¶rÃ¼ntÃ¼leme

</td>
<td width="25%">

#### ğŸ‘¤ User (Yolcu)
- Bilet satÄ±n alma
- Koltuk seÃ§imi
- Kupon kullanma
- PDF indirme
- Bilet iptali

</td>
<td width="25%">

#### ğŸ¢ Firma Admin
- Sefer ekleme
- Sefer dÃ¼zenleme
- Sefer silme
- Dashboard

</td>
<td width="25%">

#### ğŸ‘¨â€ğŸ’¼ Admin
- Firma yÃ¶netimi
- Admin atama
- Kupon yÃ¶netimi
- Sistem istatistikleri

</td>
</tr>
</table>

### ğŸ¯ Ana Ã–zellikler

âœ… **Bilet Ä°ÅŸlemleri**
- Koltuk seÃ§imi (dolu koltuklar otomatik pasif)
- Ä°ndirim kuponu sistemi
- Sanal kredi ile Ã¶deme
- PDF bilet Ã¼retimi
- Son 1 saat iptal kuralÄ±

âœ… **GÃ¼venlik**
- SQL Injection korumasÄ± (PDO Prepared Statements)
- XSS korumasÄ± (htmlspecialchars)
- Password hashing (bcrypt)
- Session yÃ¶netimi
- Rol tabanlÄ± yetkilendirme

âœ… **Modern ArayÃ¼z**
- Bootstrap 5 ile responsive tasarÄ±m
- KullanÄ±cÄ± dostu arayÃ¼z
- Flash mesaj sistemi
- Dinamik menÃ¼ler

---

## ğŸ›  Teknolojiler

<table>
<tr>
<td align="center" width="96">
<img src="https://cdn.jsdelivr.net/gh/devicons/devicon/icons/php/php-original.svg" width="48" height="48" alt="PHP" />
<br>PHP 8.2
</td>
<td align="center" width="96">
<img src="https://cdn.jsdelivr.net/gh/devicons/devicon/icons/sqlite/sqlite-original.svg" width="48" height="48" alt="SQLite" />
<br>SQLite 3
</td>
<td align="center" width="96">
<img src="https://cdn.jsdelivr.net/gh/devicons/devicon/icons/bootstrap/bootstrap-original.svg" width="48" height="48" alt="Bootstrap" />
<br>Bootstrap 5
</td>
<td align="center" width="96">
<img src="https://cdn.jsdelivr.net/gh/devicons/devicon/icons/javascript/javascript-original.svg" width="48" height="48" alt="JavaScript" />
<br>JavaScript
</td>
<td align="center" width="96">
<img src="https://cdn.jsdelivr.net/gh/devicons/devicon/icons/docker/docker-original.svg" width="48" height="48" alt="Docker" />
<br>Docker
</td>
</tr>
</table>

- **Backend:** PHP 8.2
- **VeritabanÄ±:** SQLite 3
- **Frontend:** HTML5, CSS3, Bootstrap 5, JavaScript
- **Server:** Apache 2.4
- **Containerization:** Docker & Docker Compose

---

## ğŸ’» Sistem Gereksinimleri

### Docker ile Kurulum (Ã–nerilen) â­
```
âœ… Docker 20.10+
âœ… Docker Compose 2.0+
```

### Manuel Kurulum
```
âœ… PHP 8.0 veya Ã¼zeri
âœ… SQLite3 PHP eklentisi
âœ… Apache veya Nginx
âœ… Composer (opsiyonel)
```

---

## ğŸš€ Kurulum

### Docker ile Kurulum (Ã–nerilen) â­

#### 1ï¸âƒ£ Projeyi KlonlayÄ±n

```bash
git clone https://github.com/emin.gkck/bilet-satin-alma.git
cd bilet-satin-alma
```

#### 2ï¸âƒ£ Otomatik Kurulum

**Linux/Mac:**
```bash
chmod +x install.sh
./install.sh
```

**Windows (Git Bash):**
```bash
sh install.sh
```

#### 3ï¸âƒ£ Manuel Docker Kurulumu

```bash
# Docker image'Ä± oluÅŸtur
docker-compose build

# Container'Ä± baÅŸlat
docker-compose up -d

# VeritabanÄ±nÄ± baÅŸlat
docker exec bilet-platform php init_db.php
```

#### 4ï¸âƒ£ TarayÄ±cÄ±da AÃ§Ä±n

```
ğŸŒ http://localhost:8080
```

ğŸ‰ **Tebrikler! Kurulum tamamlandÄ±!**

---

### Manuel Kurulum

#### 1ï¸âƒ£ Projeyi Ä°ndirin

```bash
git clone https://github.com/kullanici-adi/bilet-satin-alma.git
cd bilet-satin-alma
```

#### 2ï¸âƒ£ VeritabanÄ±nÄ± BaÅŸlatÄ±n

```bash
php init_db.php
```

#### 3ï¸âƒ£ Web Sunucusunu AyarlayÄ±n

**Apache:**
```bash
# Proje dizinini DocumentRoot olarak ayarlayÄ±n
sudo ln -s /path/to/bilet-satin-alma /var/www/html/

# Apache'yi yeniden baÅŸlatÄ±n
sudo systemctl restart apache2
```

**PHP Built-in Server (Development):**
```bash
php -S localhost:8080 -t .
```

#### 4ï¸âƒ£ Ä°zinleri AyarlayÄ±n

```bash
chmod -R 755 .
chmod 777 database.db
```

#### 5ï¸âƒ£ TarayÄ±cÄ±da AÃ§Ä±n

```
ğŸŒ http://localhost:8080
```

---

## ğŸ“– KullanÄ±m

### ğŸ¬ HÄ±zlÄ± BaÅŸlangÄ±Ã§

#### 1. Ana Sayfa
- KalkÄ±ÅŸ ve varÄ±ÅŸ ÅŸehri seÃ§in
- Tarih seÃ§in
- "Sefer Ara" butonuna tÄ±klayÄ±n

#### 2. Bilet SatÄ±n Alma (User)
```
1. GiriÅŸ yapÄ±n (demo_user / user123)
2. Sefer arayÄ±n
3. Sefer detayÄ±na gidin
4. "Bilet SatÄ±n Al" butonuna tÄ±klayÄ±n
5. Koltuk seÃ§in (dolu koltuklar gri)
6. Ä°sterseniz kupon kodu girin (YAZ2025)
7. "Ã–demeyi Tamamla"
8. Biletlerim'den PDF indirin
```

#### 3. Sefer Ekleme (Firma Admin)
```
1. GiriÅŸ yapÄ±n (metro_admin / firma123)
2. "Firma Paneli" â†’ "Yeni Sefer Ekle"
3. Formu doldurun
4. Kaydet
5. "Seferleri YÃ¶net"'ten dÃ¼zenleyin/silin
```

#### 4. Sistem YÃ¶netimi (Admin)
```
1. GiriÅŸ yapÄ±n (admin / admin123)
2. "Admin Paneli"
3. Firma/Admin/Kupon yÃ¶netimi
```

---

## ğŸ” Demo Hesaplar

<table>
<tr>
<th>Rol</th>
<th>KullanÄ±cÄ± AdÄ±</th>
<th>Åifre</th>
<th>Ã–zellikler</th>
</tr>
<tr>
<td>ğŸ‘¨â€ğŸ’¼ <strong>Admin</strong></td>
<td><code>admin</code></td>
<td><code>admin123</code></td>
<td>
â€¢ Tam sistem yetkisi<br>
â€¢ Firma yÃ¶netimi<br>
â€¢ Kupon yÃ¶netimi
</td>
</tr>
<tr>
<td>ğŸ¢ <strong>Firma Admin</strong></td>
<td><code>metro_admin</code></td>
<td><code>firma123</code></td>
<td>
â€¢ Metro Turizm yetkisi<br>
â€¢ Sefer CRUD iÅŸlemleri<br>
â€¢ Dashboard
</td>
</tr>
<tr>
<td>ğŸ‘¤ <strong>User</strong></td>
<td><code>demo_user</code></td>
<td><code>user123</code></td>
<td>
â€¢ 1000â‚º baÅŸlangÄ±Ã§ kredisi<br>
â€¢ Bilet alma/iptal<br>
â€¢ PDF indirme
</td>
</tr>
</table>

### ğŸ·ï¸ Ã–rnek Kupon KodlarÄ±

| Kod | Ä°ndirim | Limit | BitiÅŸ |
|-----|---------|-------|-------|
| `YAZ2025` | %15 | 100 | 31.12.2025 |
| `ILKSEFERIM` | %20 | 50 | 30.11.2025 |
| `OGRENCI10` | %10 | 200 | 31.12.2025 |

---

## ğŸ“ Proje YapÄ±sÄ±

```
bilet-satin-alma/
â”‚
â”œâ”€â”€ ğŸ“„ index.php                      # Ana sayfa
â”œâ”€â”€ ğŸ“„ login.php                      # GiriÅŸ
â”œâ”€â”€ ğŸ“„ register.php                   # KayÄ±t
â”œâ”€â”€ ğŸ“„ logout.php                     # Ã‡Ä±kÄ±ÅŸ
â”œâ”€â”€ ğŸ“„ trip_details.php               # Sefer detaylarÄ±
â”œâ”€â”€ ğŸ“„ download_ticket.php            # PDF bilet
â”‚
â”œâ”€â”€ ğŸ“ config/                        # YapÄ±landÄ±rma
â”‚   â”œâ”€â”€ config.php                    # Ana config
â”‚   â””â”€â”€ database.php                  # DB baÄŸlantÄ±sÄ±
â”‚
â”œâ”€â”€ ğŸ“ includes/                      # Ortak dosyalar
â”‚   â”œâ”€â”€ header.php                    # BaÅŸlÄ±k
â”‚   â”œâ”€â”€ footer.php                    # Alt bilgi
â”‚   â”œâ”€â”€ functions.php                 # 50+ fonksiyon
â”‚   â””â”€â”€ auth.php                      # Kimlik doÄŸrulama
â”‚
â”œâ”€â”€ ğŸ“ pages/                         # Sayfa dosyalarÄ±
â”‚   â”œâ”€â”€ ğŸ“ user/                      # KullanÄ±cÄ± sayfalarÄ±
â”‚   â”‚   â”œâ”€â”€ my_tickets.php            # Biletlerim
â”‚   â”‚   â”œâ”€â”€ buy_ticket.php            # Bilet al
â”‚   â”‚   â””â”€â”€ cancel_ticket.php         # Bilet iptal
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“ company_admin/             # Firma admin
â”‚   â”‚   â”œâ”€â”€ dashboard.php             # Dashboard
â”‚   â”‚   â”œâ”€â”€ manage_trips.php          # Sefer yÃ¶netimi
â”‚   â”‚   â””â”€â”€ add_edit_trip.php         # Sefer ekle/dÃ¼zenle
â”‚   â”‚
â”‚   â””â”€â”€ ğŸ“ admin/                     # Admin sayfalarÄ±
â”‚       â”œâ”€â”€ dashboard.php             # Dashboard
â”‚       â”œâ”€â”€ manage_companies.php      # Firma yÃ¶netimi
â”‚       â”œâ”€â”€ manage_company_admins.php # Admin yÃ¶netimi
â”‚       â””â”€â”€ manage_coupons.php        # Kupon yÃ¶netimi
â”‚
â”œâ”€â”€ ğŸ“ assets/                        # Statik dosyalar
â”‚   â”œâ”€â”€ ğŸ“ css/
â”‚   â”‚   â””â”€â”€ style.css                 # Ã–zel CSS
â”‚   â””â”€â”€ ğŸ“ js/
â”‚       â””â”€â”€ main.js                   # JavaScript
â”‚
â”œâ”€â”€ ğŸ—„ï¸ database.sql                   # DB ÅŸemasÄ±
â”œâ”€â”€ ğŸ—„ï¸ database.db                    # SQLite dosyasÄ±
â”œâ”€â”€ ğŸ“„ init_db.php                    # DB baÅŸlatma
â”‚
â”œâ”€â”€ ğŸ³ Dockerfile                     # Docker image
â”œâ”€â”€ ğŸ³ docker-compose.yml             # Docker compose
â”œâ”€â”€ ğŸ“„ .dockerignore                  # Docker ignore
â”œâ”€â”€ ğŸ“„ .htaccess                      # Apache config
â”œâ”€â”€ ğŸ“„ .gitignore                     # Git ignore
â”‚
â”œâ”€â”€ ğŸ“œ Makefile                       # HÄ±zlÄ± komutlar
â”œâ”€â”€ ğŸ“œ install.sh                     # Kurulum scripti
â”œâ”€â”€ ğŸ“œ deploy.sh                      # Deploy scripti
â”‚
â””â”€â”€ ğŸ“š DokÃ¼mantasyon
    â”œâ”€â”€ README.md                     # Bu dosya
    â”œâ”€â”€ CONTRIBUTING.md               # KatkÄ± rehberi
    â”œâ”€â”€ CHANGELOG.md                  # DeÄŸiÅŸiklikler
    â””â”€â”€ SECURITY.md                   # GÃ¼venlik
```

---

## ğŸ—„ï¸ VeritabanÄ± ÅemasÄ±

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   users     â”‚       â”‚  companies   â”‚       â”‚    trips    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id          â”‚â”€â”€â”    â”‚ id           â”‚â—„â”€â”€â”€â”€â”€â”€â”‚ company_id  â”‚
â”‚ username    â”‚  â”‚    â”‚ name         â”‚       â”‚ departure   â”‚
â”‚ email       â”‚  â”‚    â”‚ phone        â”‚       â”‚ arrival     â”‚
â”‚ password    â”‚  â”‚    â”‚ email        â”‚       â”‚ date        â”‚
â”‚ full_name   â”‚  â”‚    â”‚ address      â”‚       â”‚ time        â”‚
â”‚ phone       â”‚  â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚ price       â”‚
â”‚ role        â”‚  â”‚                           â”‚ seats       â”‚
â”‚ company_id  â”‚â”€â”€â”˜    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚ credit      â”‚       â”‚   coupons    â”‚             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤             â”‚
      â”‚               â”‚ id           â”‚             â”‚
      â”‚               â”‚ code         â”‚             â”‚
      â”‚               â”‚ discount_rateâ”‚             â”‚
      â”‚               â”‚ usage_limit  â”‚             â”‚
      â”‚               â”‚ used_count   â”‚             â”‚
      â”‚               â”‚ expiry_date  â”‚             â”‚
      â”‚               â”‚ is_active    â”‚             â”‚
      â”‚               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
      â”‚                                            â”‚
      â”‚               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚   tickets    â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
                      â”‚ id           â”‚
                      â”‚ user_id      â”‚
                      â”‚ trip_id      â”‚
                      â”‚ seat_number  â”‚
                      â”‚ price        â”‚
                      â”‚ coupon_code  â”‚
                      â”‚ discount     â”‚
                      â”‚ final_price  â”‚
                      â”‚ status       â”‚
                      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”’ GÃ¼venlik

### Uygulanan GÃ¼venlik Ã–nlemleri

âœ… **SQL Injection KorumasÄ±**
```php
$stmt = $pdo->prepare("SELECT * FROM users WHERE id = ?");
$stmt->execute([$userId]);
```

âœ… **XSS KorumasÄ±**
```php
function clean($data) {
    return htmlspecialchars(trim($data), ENT_QUOTES, 'UTF-8');
}
```

âœ… **Password Security**
```php
$hash = password_hash($password, PASSWORD_DEFAULT);
password_verify($password, $hash);
```

âœ… **Session YÃ¶netimi**
- Secure session ayarlarÄ±
- Session hijacking korumasÄ±
- Otomatik logout

âœ… **Role-Based Access Control**
```php
requireLogin();
requireRole(ROLE_ADMIN);
```

### GÃ¼venlik BaÅŸlÄ±klarÄ± (.htaccess)

```apache
Header set X-XSS-Protection "1; mode=block"
Header set X-Frame-Options "SAMEORIGIN"
Header set X-Content-Type-Options "nosniff"
```

---

## âš™ï¸ Makefile KomutlarÄ±

```bash
make help          # TÃ¼m komutlarÄ± listele
make install       # Projeyi kur
make start         # BaÅŸlat
make stop          # Durdur
make restart       # Yeniden baÅŸlat
make logs          # LoglarÄ± gÃ¶ster
make shell         # Container'a gir
make clean         # Temizlik yap
make init-db       # DB'yi sÄ±fÄ±rla
make backup        # DB yedekle
```

---

## ğŸ› Sorun Giderme

### Port 8080 kullanÄ±mda

```bash
# docker-compose.yml dosyasÄ±nda portu deÄŸiÅŸtirin
ports:
  - "8081:80"
```

### VeritabanÄ± hatasÄ±

```bash
rm database.db
php init_db.php
```

### Ä°zin hatasÄ±

```bash
chmod -R 755 .
chmod 777 database.db
```

### Docker container baÅŸlamÄ±yor

```bash
docker-compose logs
docker-compose down
docker-compose up -d --build
```

---

## ğŸ“Š Ä°statistikler

<div align="center">

| Ã–zellik | SayÄ± |
|---------|------|
| ğŸ“„ PHP DosyasÄ± | 30+ |
| ğŸ”§ Fonksiyon | 50+ |
| ğŸ“ Kod SatÄ±rÄ± | 7000+ |
| ğŸ—„ï¸ VeritabanÄ± Tablosu | 5 |
| ğŸ‘¥ KullanÄ±cÄ± RolÃ¼ | 4 |
| ğŸ« Demo Bilet | 5 |
| ğŸ·ï¸ Demo Kupon | 3 |

</div>

---

## ğŸ¤ KatkÄ±da Bulunma

KatkÄ±larÄ±nÄ±zÄ± bekliyoruz! LÃ¼tfen [CONTRIBUTING.md](CONTRIBUTING.md) dosyasÄ±nÄ± okuyun.

1. Fork edin
2. Feature branch oluÅŸturun (`git checkout -b feature/amazing`)
3. Commit edin (`git commit -m 'Add amazing feature'`)
4. Push edin (`git push origin feature/amazing`)
5. Pull Request aÃ§Ä±n

---

## ğŸ“ Lisans

Bu proje [MIT License](LICENSE) ile lisanslanmÄ±ÅŸtÄ±r.

---

## ğŸ“ Ä°letiÅŸim

- ğŸ“§ Email: info@biletplatformu.com
- ğŸ› Issues: [GitHub Issues](https://github.com/emin.gkck/bilet-satin-alma/issues)
- ğŸ’¬ Discussions: [GitHub Discussions](https://github.com/emin.gkck/bilet-satin-alma/discussions)

---

## ğŸŒŸ YÄ±ldÄ±z GeÃ§miÅŸi

[![Star History Chart](https://api.star-history.com/svg?repos=kullanici-adi/bilet-satin-alma&type=Date)](https://star-history.com/#kullanici-adi/bilet-satin-alma&Date)

---

<div align="center">

**â­ Projeyi beÄŸendiyseniz yÄ±ldÄ±z vermeyi unutmayÄ±n!**

Made with â¤ï¸ by Emin GÃ¶kÃ§ek

[â¬† YukarÄ± Ã‡Ä±k](#-bilet-satÄ±n-alma-platformu)

</div>